var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};function t(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}function r(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{p(n.next(e))}catch(e){a(e)}}function s(e){try{p(n.throw(e))}catch(e){a(e)}}function p(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}p((n=n.apply(e,t||[])).next())}))}function n(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(p){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,p])}}}"function"==typeof SuppressedError&&SuppressedError;const o=window[Symbol.for("typora-plugin-core@v2")];o.app,o.Component,o.Events,o.Modal,o.Notice;const a=o.I18n,i=o.PluginSettings,s=o.Plugin,p=o.SettingTab;o.SettingItem,o.PostProcessor,o.HtmlPostProcessor,o.CodeblockPostProcessor,o.View,o.EditorSuggest,o.TextSuggest,o.WorkspaceRibbon,o.Sidebar,o.fs,o.path,o.format,o.html,o.until,o.decorate;const d=window.editor,c=window.getMarkdown;var u={propNames:[],useCreated:!0,useUpdated:!0,propNameCreated:"created",propNameUpdated:"updated",dateFormat:"yyyy-MM-dd hh:mm:ss"},l=function(e){function r(t){var r=e.call(this)||this;return r.plugin=t,r.i18n=new a({resources:{en:{propNames:"Default front matter",propNamesDesc:"Add front matter property's key to new note automatically.\n Format: `prop1, prop2, ...`",propCreated:"Prop `created`",propCreatedDesc:"After openning empty note, auto add `created` datetime.",propUpdated:"Prop `updated`",propUpdatedDesc:"Before save note, auto update `updated` datetime.",dateFormat:"Datetime format",dateFormatDesc:"Supported placeholders: `yyyy`, `yy`, `MM`, `dd`, `hh`, `mm`, `ss`"},"zh-cn":{propNames:"默认 front matter",propNamesDesc:"新建笔记时自动添加的 front matter 属性。\n格式：`prop1, prop2, ...`",propCreated:"属性 `created`",propCreatedDesc:"打开空白笔记后，自动添加 `created` 日期时间。",propUpdated:"属性 `updated`",propUpdatedDesc:"保存笔记前，自动更新 `updated` 日期时间。",dateFormat:"时间格式化模板",dateFormatDesc:"支持的占位符：`yyyy`, `yy`, `MM`, `dd`, `hh`, `mm`, `ss`"}}}),r}return t(r,e),Object.defineProperty(r.prototype,"name",{get:function(){return"Front Matter"},enumerable:!1,configurable:!0}),r.prototype.show=function(){var t=this.plugin,r=this.i18n.t;this.containerEl.innerHTML="",this.addSetting((function(e){e.addName(r.propNames),e.addDescription(r.propNamesDesc),e.addText((function(e){e.value=t.settings.get("propNames").join(", "),e.placeholder="prop1, prop2",e.oninput=function(){t.settings.set("propNames",e.value.split(/, */).filter(Boolean))}}))})),this.addSetting((function(e){e.addName(r.propCreated),e.addDescription(r.propCreatedDesc),e.addCheckbox((function(e){e.checked=t.settings.get("useCreated"),e.onchange=function(){t.settings.set("useCreated",e.checked)}})),e.addText((function(e){e.value=t.settings.get("propNameCreated"),e.placeholder=u.propNameCreated,e.oninput=function(){var r;t.settings.set("propNameCreated",null!==(r=e.value)&&void 0!==r?r:u.propNameCreated)}}))})),this.addSetting((function(e){e.addName(r.propUpdated),e.addDescription(r.propUpdatedDesc),e.addCheckbox((function(e){e.checked=t.settings.get("useUpdated"),e.onchange=function(){t.settings.set("useUpdated",e.checked)}})),e.addText((function(e){e.value=t.settings.get("propNameUpdated"),e.placeholder=u.propNameUpdated,e.oninput=function(){var r;t.settings.set("propNameUpdated",null!==(r=e.value)&&void 0!==r?r:u.propNameUpdated)}}))})),this.addSetting((function(e){e.addName(r.dateFormat),e.addDescription(r.dateFormatDesc),e.addText((function(e){e.value=t.settings.get("dateFormat"),e.placeholder=u.dateFormat,e.oninput=function(){var r;t.settings.set("dateFormat",null!==(r=e.value)&&void 0!==r?r:u.dateFormat)}}))})),e.prototype.show.call(this)},r}(p),f=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return t(o,e),o.prototype.onload=function(){return r(this,void 0,void 0,(function(){var e,t=this;return n(this,(function(r){return e=this.app,this.registerSettings(new i(e,this.manifest,{version:1})),this.settings.setDefault(u),this.register(e.workspace.on("file:open",(function(){var e=d.docMenu,r=""===c().trim();e.getMetaNode()&&d.stylize.insertMetaBlock(),r&&(t.settings.get("propNames").forEach((function(t){e.writeProperty(t,"")})),t.settings.get("useCreated")&&e.writeProperty(t.settings.get("propNameCreated"),g(t.settings.get("dateFormat"))))}))),this.register(e.workspace.on("file:will-save",(function(){var e=d.docMenu;e.getMetaNode()&&d.stylize.insertMetaBlock(),t.settings.get("useCreated")&&e.writeProperty(t.settings.get("propNameUpdated"),g(t.settings.get("dateFormat")))}))),this.registerSettingTab(new l(this)),[2]}))}))},o}(s);function g(e){var t=new Date,r={yyyy:t.getFullYear(),yy:t.getFullYear().toString().slice(2),MM:t.getMonth()+1,dd:t.getDate(),hh:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds()};return Object.keys(r).reduce((function(e,t){return e.replace(t,r[t].toString().padStart(t.length,"0"))}),e)}export{f as default};
